!function(a){function b(a,b,c){this.paper.queue.push({assign:a,params:b,loaded:c})}function c(a,b){for(var c=0;c<b.length;c++)if(b[c].element.isEqualNode(a))return b[c];return!1}function d(a,b){for(var c=b||["x","y","width","height"],d={},e=0;e<a.length;e++)"object"==typeof a[e]?d.style=a[e]:c.length&&(d[c.shift()]=a[e]);return d.style=f(d.style),"string"==typeof d.x&&"string"==typeof d.y&&(d=g(d)),d}function e(a){return f({border:a})}function f(a){a||(a={});var b=a.borderSize||null,c=a.borderColor||null,d=a.borderStyle||[];if(a.border){var e=[],f=a.border;e=e.concat(a.border.match(/[0-9]*\.?[0-9]px?/i)),f=f.replace(/[0-9]*\.?[0-9]px?/i,""),e=e.concat(f.match(/solid|dashed|dotted/i)),f=f.replace(/solid|dashed|dotted/i,""),e=e.concat(f.match(/[^\s]+/i)),b||(b=e[0]),c||(c=e[2]),d=e[1]}return b&&(b=b.replace(/[^0-9]/g,"")),"string"==typeof d&&(d="dashed"===d?[12]:"dotted"===d?[3]:[]),a.borderSize=b,a.borderStyle=d,a.borderColor=c,a}function g(a){var b=a.x,c=a.y,d=x.getPaper(),e=d.element.width,f=d.element.height,g=a.r||0,h=a.width||g,i=a.height||h,j={x:["right","center","left"],y:["top","center","bottom"]};return j.x.indexOf(b)!==-1?"right"===b?b=Math.floor(e-h):"center"===b?b=g?Math.floor(e/2):Math.floor(e/2-h/2):"left"===b&&(b=g):b="%"===(b+"").substr(-1)?e*parseInt(b,10)/100:0,j.y.indexOf(c)!==-1?"top"===c?c=g:"center"===c?c=g?Math.floor(f/2):Math.floor(f/2-i/2):"bottom"===c&&(c=Math.floor(f-i)):c="%"===(c+"").substr(-1)?f*parseInt(c,10)/100:0,a.y=c,a.x=b,a}function h(){for(var a=0;a<document.styleSheets.length;a++){var b=document.styleSheets[a],c=b.cssRules?b.cssRules:b.rules;y.documentStyles.push(c)}}function i(a,b,c){for(var d in b)B.call(b,d)&&("constructor"===d&&a===global||(void 0===b[d]?delete a[d]:c&&"undefined"!=typeof a[d]||(a[d]=b[d])));return a}function j(a,b){for(var c=0;c<b.length;c++)if(b[c].selectorText&&b[c].selectorText.toLowerCase()===a)return b[c].style}function k(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function l(a){this.paper=a}function m(a){var b=a.args,c=b.style,d=y.defaults.arc;this.paper.ctx.beginPath(),this.paper.ctx.setLineDash(c.borderStyle),this.paper.ctx.arc(b.x,b.y,b.r||d.radius,b.sAngle||0,b.eAngle||2*Math.PI),this.paper.ctx.fillStyle=c.background||c.bg?c.background||c.bg:d.background,this.paper.ctx.fill(),this.paper.ctx.lineWidth=c.borderSize?c.borderSize:d.lineWidth,this.paper.ctx.strokeStyle=c.borderColor?c.borderColor:d.strokeStyle,this.paper.ctx.stroke(),this.paper.ctx.setLineDash([]),this.paper.ctx.closePath()}function n(a){var b=a.image,c=a.x,d=a.y,e=a.width,f=a.height;this.paper.ctx.save(),this.paper.flip&&("horizontal"===this.paper.flip&&(this.paper.ctx.scale(-1,1),e*=-1,c*=-1),"vertical"===this.paper.flip&&(this.paper.ctx.scale(1,-1),f*=-1,d*=-1)),this.paper.ctx.beginPath(),this.paper.ctx.drawImage(b,Math.floor(c||0),Math.floor(d||0),e,f),this.paper.ctx.closePath(),this.paper.ctx.restore()}function o(a){var b=y.defaults.line,c=a.style,d=a.pointA,e=a.pointB;this.paper.ctx.beginPath(),this.paper.ctx.setLineDash(c.borderStyle),this.paper.ctx.moveTo(d.x||0,d.y||0),this.paper.ctx.lineTo(e.x||0,e.y||0),this.paper.ctx.lineWidth=c.borderSize?c.borderSize:b.lineWidth,this.paper.ctx.strokeStyle=c.borderColor?c.borderColor:b.strokeStyle,this.paper.ctx.stroke(),this.paper.ctx.setLineDash([]),this.paper.ctx.closePath()}function p(a){var b=a.args,c=a.style,d=y.defaults.polygon;this.paper.ctx.beginPath(),this.paper.ctx.setLineDash(c.borderStyle),this.paper.ctx.fillStyle=c.background?c.background:d.background,this.paper.ctx.lineWidth=c.borderSize?c.borderSize:d.lineWidth,this.paper.ctx.strokeStyle=c.borderColor?c.borderColor:d.strokeStyle;for(var e=0;e<b.length;e++)b[e].x&&(e?this.paper.ctx.lineTo(b[e].x,b[e].y):this.paper.ctx.moveTo(b[e].x,b[e].y));this.paper.ctx.fill(),this.paper.ctx.stroke(),this.paper.ctx.setLineDash([]),this.paper.ctx.closePath()}function q(a){var b=y.defaults.rect,c=a.style,d=a.args;this.paper.ctx.beginPath(),this.paper.ctx.setLineDash(c.borderStyle),this.paper.ctx.fillStyle=c.background?c.background:b.background,this.paper.ctx.fillRect(d.x,d.y,d.width,d.height||d.width),this.paper.ctx.lineWidth=c.borderSize?c.borderSize:b.lineWidth,this.paper.ctx.strokeStyle=c.borderColor?c.borderColor:b.strokeStyle,this.paper.ctx.strokeRect(d.x,d.y,d.width,d.height||d.width),this.paper.ctx.setLineDash([]),this.paper.ctx.closePath()}function r(b){var c=this,b=y.virtualStyles[b];if(!b)return c;var d='<svg xmlns="http://www.w3.org/2000/svg" width="'+c.paper.width+'px" height="'+c.paper.height+'px"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml"><div style="'+b.cssText+'"></div></div></foreignObject></svg>',e=a.URL||a.webkitURL||a,f=new Image,g=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),h=e.createObjectURL(g);return f.src=h,f.addEventListener("load",function(){c.paper.ctx.beginPath(),c.paper.ctx.drawImage(f,0,0),e.revokeObjectURL(h),c.paper.ctx.closePath()}),c}function s(a){var b=a.properties,c=a.width/b.frames.total,d=b.frames,e=0;d.current&&d.current<=d.total&&(e=c*(d.current-1)),t.call(this,{image:a.image,posX:e,posY:0,frames:b.frames,animation:b.animation,loop:b.loop,width:c,widthTotal:a.width,height:a.height,dx:a.x,dy:a.y,speed:b.speed,update:null})}function t(b){var c=this;if(b.posX===b.widthTotal){if(b.loop!==!0)return void a.cancelAnimationFrame(b.update);b.posX=0}c.paper.ctx.clearRect(b.dx,b.dy,b.width,b.height),c.paper.ctx.beginPath(),c.paper.ctx.drawImage(b.image,b.posX,b.posY,b.width,b.height,b.dx,b.dy,b.width,b.height),c.paper.ctx.closePath(),b.animation!==!1&&(b.posX=b.posX+b.width),setTimeout(function(){b.update=a.requestAnimationFrame(t.bind(c,b))},b.speed)}function u(a){var b=y.defaults.text,c=a.text,d=a.x,e=a.y,f=a.style;this.paper.ctx.beginPath(),this.paper.ctx.setLineDash(f.borderStyle),this.paper.ctx.textBaseline="middle",this.paper.ctx.lineWidth=f.borderSize?f.borderSize:b.lineWidth,this.paper.ctx.strokeStyle=f.borderColor?f.borderColor:b.strokeStyle,this.paper.ctx.font=f.font||b.font,this.paper.ctx.fillStyle=f.color||b.color,this.paper.ctx.textAlign=f.align||b.align,this.paper.ctx.fillText(c,d,e),this.paper.ctx.strokeText(c,d,e),this.paper.ctx.fill(),this.paper.ctx.stroke(),this.paper.ctx.setLineDash([]),this.paper.ctx.closePath()}function v(a){function b(a){return Math.max.apply(null,a)}function c(a){return Math.min.apply(null,a)}function d(){for(var d=0,e=0,f=0;f<a.datasets.length;f++){var g,h;g=b(a.datasets[f].data),h=c(a.datasets[f].data),g>d&&(d=g),h<e&&(e=h)}return{max:d,min:e}}function e(a){return j+p*a}function f(a){return i-(w*(a-u)+k)}var g=this.paper.ctx,h=this.paper.width,i=this.paper.height;a.frame&&g.clearRect(0,0,this.paper.width,this.paper.height);var j=(a.animation,40),k=40,l=(a.datasets,{vertical:!0,horizontal:!0}),m=d(),n=Math.round(m.max),o=Math.round(m.min),p=Math.floor(h-3*j/2)/a.labels.length,q=n-o,r=q/10,s=Math.ceil(Math.log10(r)),t=Math.round(r/Math.pow(10,s-1))/10*Math.pow(10,s),u=t*Math.floor(o/t),v=t*Math.floor(1+n/t),w=(i-1.5*k)/(v-u),x="#e7e7e7";a.gridLinesColor&&(x=a.gridLinesColor),a.gridLines&&(a.gridLines.vertical===!1&&(l.vertical=!1),a.gridLines.horizontal===!1&&(l.horizontal=!1)),g.fillStyle="#5e5e5e",a.labelColor&&(g.fillStyle=a.labelColor),g.font="normal 11px Helvetica",g.globalAlpha=1,g.beginPath(),g.strokeStyle=x,g.lineWidth=1.6,g.moveTo(j,k/2),g.lineTo(j,i-k),g.lineTo(h-j/2,i-k),g.stroke(),g.textAlign="center",g.textBaseline="alphabetic";for(var y=0;y<a.labels.length;y++)l.vertical&&(g.beginPath(),g.lineWidth=.8,g.strokeStyle=x,g.moveTo(e(y),i-k+5),g.lineTo(e(y),k/2),g.stroke()),g.fillText(a.labels[y],(e(y)+e(y+1))/2,i-k+20);g.textAlign="right",g.textBaseline="middle";for(var y=u;y<=v;y+=t)g.beginPath(),0!=y?g.lineWidth=.8:g.lineWidth=2,g.strokeStyle=x,g.moveTo(j-5,f(y)),g.lineTo(h-j/2,f(y)),g.stroke(),g.fillText(y,j-10,f(y));var z=.75*(e(1)-e(0))/a.datasets.length,A=.05*(e(1)-e(0));if(a.datasets.length>1)var B=parseFloat(.15*(e(1)-e(0))/(a.datasets.length-1));else var B=0;for(var y=0;y<a.labels.length;y++)for(var C=e(y)+A,D=0;D<a.datasets.length;D++){var E=a.datasets[D].data[y];g.beginPath(),g.globalAlpha=.5,g.fillStyle="orange",a.datasets[D].fillColor&&(g.fillStyle=a.datasets[D].fillColor),g.fillRect(C,f(0),z,f(E)-f(0)),g.lineWidth=2,a.datasets[D].borderWidth&&(g.lineWidth=a.datasets[D].borderWidth),g.strokeStyle="orange",a.datasets[D].borderColor&&("string"==typeof a.datasets[D].borderColor?g.strokeStyle=a.datasets[D].borderColor:"object"==typeof a.datasets[D].borderColor&&(g.strokeStyle=a.datasets[D].borderColor[y])),g.moveTo(C,f(0)),g.lineTo(C,f(E)),g.lineTo(C+z,f(E)),g.lineTo(C+z,f(0)),g.stroke(),C+=z+B}}function w(a){function b(a){return Math.max.apply(null,a)}function c(a){return Math.min.apply(null,a)}function d(){for(var a=0,d=0,e=0;e<p.length;e++){var f,g;"object"==typeof p[e].data[0]?(f=b(p[e].data.map(function(a){return a[1]})),g=c(p[e].data.map(function(a){return a[1]}))):(f=b(p[e].data),g=c(p[e].data)),f>a&&(a=f),g<d&&(d=g)}return a+=o-a%10,d-=o+d%10,{max:a,min:d}}function f(b){return parseFloat((j-n)/a.labels.length*b+n)}function g(a){var b=s/(s-t);return parseFloat((k-(k-o)/s*a)*b)}function h(a,b){return Math.random()*(b-a)+a}var i=this.paper.ctx,j=this.paper.width,k=this.paper.height;a.frame&&i.clearRect(0,0,this.paper.width,this.paper.height);var l=2,m=a.animation;a.props||(a.props={alpha:1});var n=40,o=40,p=a.datasets,q={vertical:!0,horizontal:!0},r=d(),s=Math.round(r.max),t=Math.round(r.min),u="#e7e7e7";a.gridLinesColor&&(u=a.gridLinesColor),a.gridLines&&(a.gridLines.vertical===!1&&(q.vertical=!1),a.gridLines.horizontal===!1&&(q.horizontal=!1)),i.fillStyle="#5e5e5e",a.labelColor&&(i.fillStyle=a.labelColor),i.font="normal 11px Helvetica",i.globalAlpha=1,i.textAlign="left",i.textBaseline="alphabetic";for(var v=0;v<a.labels.length;v++){q.vertical&&(i.beginPath(),i.lineWidth=.8,i.strokeStyle=u,i.moveTo(f(v),k-o+10),i.lineTo(f(v),o/l),i.stroke());var x=String(a.labels[v]);i.fillText(x,f(v)-2.5*x.length,k-o+22)}i.textAlign="right",i.textBaseline="middle";for(var y=a.tense||7,z=10*Math.round(Math.round((s-t)/y)/10),v=t+z;v<s;v+=z)q.horizontal&&(i.beginPath(),i.lineWidth=.8,i.strokeStyle=u,i.moveTo(n-5,g(v)),i.lineTo(j-(n/l+30),g(v)),i.stroke()),i.fillText(v,n-10,g(v));m&&"fade"===m&&1===a.props.alpha&&(a.props.alpha=.0025),i.lineWidth=.8,i.strokeStyle="#999",i.font="normal 12px Helvetica",i.fillStyle="#5e5e5e",i.textAlign="center",i.beginPath(),i.moveTo(n,o/l),i.lineTo(n,k-o),i.lineTo(j-(n/l+30),k-o),i.stroke();for(var v=0;v<p.length;v++){i.globalAlpha=a.props.alpha,a.props.alpha+=a.props.alpha/h(10,50);var A=p[v],B=e(A.line||"1px solid #000");i.beginPath(),i.lineWidth=B.borderSize,i.setLineDash(B.borderStyle),i.strokeStyle=B.borderColor,i.moveTo(f(0),g(A.data[0]));for(var C=0;C<A.data.length;C++)"object"==typeof A.data[C]?i.lineTo(f(A.data[C][0]),g(A.data[C][1])):i.lineTo(f(C),g(A.data[C]));if(i.stroke(),i.setLineDash([]),a.fill&&(i.lineTo(f(A.data.length-1),g(0)),i.lineTo(n,g(0)),i.closePath(),i.globalAlpha=.2,i.fillStyle=B.borderColor,i.fill(),i.globalAlpha=1),A.points)for(var D=0;D<A.data.length;D++)i.beginPath(),i.fillStyle=A.pointsColor?A.pointsColor:"rgb(75,75,75)","object"==typeof A.data[D]?i.arc(f(A.data[D][0]),g(A.data[D][1]),4,0,2*Math.PI,!0):i.arc(f(D),g(A.data[D]),4,0,2*Math.PI,!0),i.fill(),i.closePath(),i.beginPath(),i.fillStyle="#FFF",i.arc(f(D),g(A.data[D]),2,0,2*Math.PI,!0),i.fill(),i.closePath()}m&&(a.props.alpha<1?a.frame=requestAnimationFrame(w.bind(this,a)):cancelAnimationFrame(a.frame))}var x={paper:null},y={documentStyles:[],virtualStyles:{},contexts:[],defaults:{arc:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},rect:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},polygon:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},line:{strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},text:{font:"14px Helvetica",strokeStyle:"rgba(0, 0, 0, 0)",color:"#000",lineWidth:null}}},z="[origami.js]";x.warning=function(a,b){console&&console.warn&&console.warn(z,a,b)},x.error=function(a){throw new Error(z.concat(" "+a))},x.init=function(a){a=a.canvas?a.canvas:document.querySelector(a),a||this.error("Please use a valid selector or canvas context");var b=c(a,y.contexts);if(b)return this.paper=b,this;a.getContext||this.error("Please verify if it's a valid canvas element"),a.width=a.clientWidth,a.height=a.clientHeight;var d=a.getContext("2d"),e={element:a,queue:[],index:y.contexts.length,flip:!1,frame:null,ctx:d,width:a.width,height:a.height};return y.contexts.push(e),this.paper=e,this},x.styles=function(){y.virtualStyles.length||h(y);var a=arguments;if(!a.length)return y.virtualStyles.empty=!0,this;for(var b=0;b<a.length;b++){var c=j(a[b],y.documentStyles[0]||[]);y.virtualStyles[a[b]]=c}return this},x.getPaper=function(){return this.paper},x.canvasCtx=function(){return this.paper.ctx},x.getContexts=function(){return y.contexts},x.cleanContexts=function(){y.contexts=[]},x.createComponent=function(a,b){x[a]=function(a){return b.bind(this,this,a)(),this}},x.fn={},x.draw=function(a){var b=this,c=!1,d=b.paper.ctx;"string"==typeof a&&(c=new origami.fn[a](b.paper),b.paper.ctx=c);for(var e=new l(b.paper),f=b.paper.queue,g=0;g<f.length;g++)(f[g].loaded===!1||f[g].failed)&&x.warning("couldn't able to load:",f[g].params),e[f[g].assign](f[g].params);b.paper.queue=[],c&&(c.draw(),b.paper.ctx=d),"function"==typeof a&&a()},x.load=function(a){var b=k(this);b.paper=this.paper;var c=setInterval(function(){var d=b.paper.queue.filter(function(a){return a.loaded===!1&&!a.failed});d.length||(clearInterval(c),a.bind(b,b)())},1)};var A=b.bind(x),B=Object.prototype.hasOwnProperty;l.prototype.translate=function(a){this.paper.ctx.translate(a.x,a.y)},l.prototype.background=function(a){this.paper.element.style.backgroundColor=a.color},l.prototype.restore=function(){this.paper.ctx.restore()},l.prototype.save=function(){this.paper.ctx.save()},l.prototype.composition=function(a){this.paper.ctx.globalCompositeOperation=a.globalComposite},l.prototype.rotate=function(a){this.paper.ctx.rotate(a.degrees)},l.prototype.scale=function(a){this.paper.ctx.scale(a.width,a.height)},l.prototype.flip=function(a){this.paper.flip="horizontal",a.type&&"string"==typeof a.type&&(this.paper.flip=a.type)},l.prototype.flipEnd=function(){this.paper.flip=!1},l.prototype.clear=function(){this.paper.ctx.clearRect(0,0,this.paper.width,this.paper.height)},l.prototype.opacity=function(a){this.paper.ctx.globalAlpha=a.opacity},l.prototype.arc=m,x.arc=function(){var a=[].slice.call(arguments);return a=d(a,["x","y","r","sAngle","eAngle"]),A("arc",{args:a}),this},l.prototype.image=n,x.image=function(a,b,c,d,e){var f=this;if(!a)return this;if("string"==typeof a){var h=new Image;h.src=a,a=h}var i={image:a,x:b,y:c,width:d,height:e};if("string"==typeof i.x&&"string"==typeof i.y&&(i=g(i)),a.complete)return i.width=d||a.naturalWidth,i.height=e||a.naturalHeight,A("image",i),f;A("image",i,!1);var j=f.paper.queue.length-1,k=y.contexts[this.paper.index].queue[j];return a.addEventListener("load",function(){return!!k&&(k.params.width=i.width||a.naturalWidth,k.params.height=i.height||a.naturalHeight,void(k.loaded=!0))}),a.addEventListener("error",function(){return!!k&&void(k.failed=!0)}),f},l.prototype.line=o,x.line=function(a,b,c){return c=f(c),A("line",{pointA:a,pointB:b,style:c}),this},l.prototype.polygon=p,x.polygon=function(){var a=[].slice.call(arguments),b=d(a);return A("polygon",{style:b.style,args:a}),this},l.prototype.rect=q,x.rect=function(){var a=[].slice.call(arguments);return a=d(a),A("rect",{style:a.style,args:a}),this},x.border=function(){var a=[].slice.call(arguments);return a=d(a),A("rect",{style:a.style,args:{x:0,y:0,width:this.paper.width,height:this.paper.height}}),this},l.prototype.CSSShape=r,x.shape=function(a){return A("CSSShape",a),this},l.prototype.sprite=s,x.sprite=function(a,b,c){var d=this,e=c.frames;if(!c||!c.src||!e.total)return this;var f=new Image;f.src=c.src,c.speed=c.speed||10;var g={x:a,y:b,image:f,properties:c,width:0,height:0};if(f.complete)return g.width=f.naturalWidth,g.height=f.naturalHeight,A("sprite",g),d;A("sprite",g,!1);var h=d.paper.queue.length-1,i=y.contexts[this.paper.index].queue[h];return f.addEventListener("load",function(){return!!i&&(i.params.width=f.naturalWidth,i.params.height=f.naturalHeight,void(i.loaded=!0))}),f.addEventListener("error",function(){return!!i&&void(i.failed=!0)}),this},l.prototype.text=u,x.text=function(a,b,c,d){d=f(d);var e={text:a,x:b,y:c,style:d};return"string"==typeof e.x&&"string"==typeof e.y&&(e=g(e)),A("text",e),this},l.prototype.chartBar=v,x.chartBar=function(a){return A("chartBar",a),this},l.prototype.chartLine=w,x.chartLine=function(a){return A("chartLine",a),this},x.background=function(a){return A("background",{color:a}),this},x.restore=function(){return A("restore"),this},x.save=function(){return A("save"),this},x.composition=function(a){return A("composition",{globalComposite:a}),this},x.translate=function(a,b){return void 0!==a&&null!==a||(a="reset"),"string"==typeof a&&("center"===a&&(a=context.width/2,b=context.height/2),"reset"===a&&(a=-context.width/2,b=-context.height/2)),A("translate",{x:a,y:b}),this},x.rotate=function(a){return"undefined"==typeof a&&(a="slow"),"string"==typeof a&&("slow"===a?a=2*Math.PI/60*(new Date).getSeconds()+2*Math.PI/6e4*(new Date).getMilliseconds():"normal"===a?a=2*Math.PI/30*(new Date).getSeconds()+2*Math.PI/3e4*(new Date).getMilliseconds():"fast"===a&&(a=2*Math.PI/6*(new Date).getSeconds()+2*Math.PI/6e3*(new Date).getMilliseconds())),A("rotate",{degrees:a}),this},x.stopRender=function(){a.cancelAnimationFrame(this.paper.frame),this.paper.frame=!1},x.play=function(){return this.paper.frame=1,this},x.startRender=function(b){var c=this;c.paper.frame!==!1&&c.draw(function(){c.paper.frame=a.requestAnimationFrame(b.bind(this))})},x.scale=function(a,b){return A("scale",{width:a,height:b}),this},x.flip=function(a){return A("flip",{type:a}),this},x.flipEnd=function(){return A("flipEnd"),this},x.clear=function(){return A("clear"),this},x.on=function(a,b){return this.paper.element.addEventListener(a,b),this},x.opacity=function(a){return A("opacity",{opacity:a}),this};var C=i(x.init.bind(this),x);"undefined"!=typeof module&&module&&module.exports?module.exports=C:"undefined"!=typeof exports&&exports?exports.origami=C:"object"==typeof a&&(a.origami=i(x.init.bind(x),x))}(function(){return this}());
//# sourceMappingURL=origami.min.js.map